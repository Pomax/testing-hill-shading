<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- 
      This is an HTML comment
      You can write text in a comment and the content won't be visible in the page
    -->

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="https://glitch.com/favicon.ico" />

    <!--
      This is the page head - it contains info the browser uses
      Like the title, which appears on the browser tab but not inside the page
      Further down you'll see the content that displays in the page
    -->
    <title>Hello (Hill-Shaded) World!</title>

    <!-- The website stylesheet -->
    <link rel="stylesheet" href="/style.css" />
    <style>
      canvas {
        max-height: 80vh;
      }
    </style>

    <!-- The website JavaScript file -->
    <script src="/script.js" defer></script>
  </head>
  <body>
    <h1>Let's test some hill shading</h1>
    <p>
      Move your mouse over the image to change the shading angle!

      <select id="blendMode">
        <option selected="selected">source-over</option>
        <option>source-in</option>
        <option>source-out</option>
        <option>source-atop</option>
        <option>destination-over</option>
        <option>destination-in</option>
        <option>destination-out</option>
        <option>destination-atop</option>
        <option>lighter</option>
        <option>copy</option>
        <option>xor</option>
        <option>multiply</option>
        <option>screen</option>
        <option>overlay</option>
        <option>darken</option>
        <option>lighten</option>
        <option>color-dodge</option>
        <option>color-burn</option>
        <option>hard-light</option>
        <option>soft-light</option>
        <option>difference</option>
        <option>exclusion</option>
        <option>hue</option>
        <option>saturation</option>
        <option>color</option>
        <option>luminosity</option>
      </select>
    </p>

    <canvas id="cvs"></canvas>

    <p>How does this work?</p>

    <ul>
      <li>We have a height map (the base image)</li>
      <li>
        We can compute the "surface normal" for each pixel by looking at its
        four direct neighbours, creating a vector {a-b,c-d,2} where "a" and "b"
        are the height at (x-1,y) and (x+1,y) respectively, and "c" and "d" are
        the height at (x,y-1) and (x,y+1), respectively
      </li>
      <li>
        We then check how much light would get reflected "up" into the screen,
        if the light is coming from a direction that's tied to where your cursor
        is on the image
      </li>
      <li>
        And then we can recolour every pixel with that value instead of its
        original value
      </li>
      <li>
        And make any pixel with a pure vertical normal transparent, because
        there's nothing to colour there
      </li>
    </ul>

    <p></p>

    <!-- The footer holds our remix button — you can keep or delete it ✂ -->
    <footer class="footer">
      <div class="links"></div>
      <a
        class="btn--remix"
        target="_top"
        href="https://glitch.com/edit/#!/remix/glitch-hello-website"
      >
        <img
          src="https://cdn.glitch.com/605e2a51-d45f-4d87-a285-9410ad350515%2FLogo_Color.svg?v=1618199565140"
          alt=""
        />
        Remix on Glitch
      </a>
    </footer>
  </body>
</html>
